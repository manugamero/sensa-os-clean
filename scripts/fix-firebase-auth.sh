#!/bin/bash

echo "üîß Configuraci√≥n autom√°tica de Firebase Authentication"
echo "=================================================="
echo ""

echo "üìã PASO 1: Verificar configuraci√≥n actual"
echo "=========================================="

# Verificar si Firebase est√° configurado
if [ -f ".env" ]; then
    echo "‚úÖ Archivo .env encontrado"
    source .env
    echo "   Project ID: $VITE_FIREBASE_PROJECT_ID"
    echo "   Auth Domain: $VITE_FIREBASE_AUTH_DOMAIN"
else
    echo "‚ùå Archivo .env no encontrado"
    exit 1
fi

echo ""
echo "üìã PASO 2: Configurar Firebase Authentication"
echo "============================================="
echo ""
echo "üîë Necesitas hacer esto en Firebase Console:"
echo ""
echo "1. Ve a https://console.firebase.google.com"
echo "2. Selecciona tu proyecto: $VITE_FIREBASE_PROJECT_ID"
echo "3. Ve a 'Authentication' ‚Üí 'Sign-in method'"
echo "4. Habilita 'Google' como proveedor"
echo "5. Configura:"
echo "   - Web SDK configuration: ON"
echo "   - Project support email: tu-email@gmail.com"
echo "   - Web client ID: (se genera autom√°ticamente)"
echo "   - Web client secret: (se genera autom√°ticamente)"
echo ""
echo "6. En 'Authorized domains' agrega:"
echo "   - localhost"
echo "   - tu-dominio.railway.app (para producci√≥n)"
echo ""

echo "üìã PASO 3: Verificar Google Cloud Console"
echo "========================================="
echo ""
echo "üîë Necesitas hacer esto en Google Cloud Console:"
echo ""
echo "1. Ve a https://console.cloud.google.com"
echo "2. Selecciona tu proyecto: $VITE_FIREBASE_PROJECT_ID"
echo "3. Ve a 'APIs & Services' ‚Üí 'Credentials'"
echo "4. Verifica que tengas:"
echo "   - OAuth 2.0 Client ID configurado"
echo "   - Authorized JavaScript origins:"
echo "     - http://localhost:3000"
echo "     - https://tu-dominio.railway.app"
echo "   - Authorized redirect URIs:"
echo "     - http://localhost:3000"
echo "     - https://tu-dominio.railway.app"
echo ""

echo "üìã PASO 4: Verificar APIs habilitadas"
echo "====================================="
echo ""
echo "üîë En Google Cloud Console, ve a 'APIs & Services' ‚Üí 'Library'"
echo "   y habilita estas APIs:"
echo "   ‚úÖ Google Calendar API"
echo "   ‚úÖ Gmail API"
echo "   ‚úÖ Google Identity API"
echo ""

echo "üìã PASO 5: Probar la aplicaci√≥n"
echo "==============================="
echo ""
echo "1. Abre http://localhost:3000"
echo "2. Haz login con Google"
echo "3. Verifica que aparezca el token en la consola"
echo "4. Ve a Calendario y Email"
echo "5. Deber√≠as ver datos reales de Google"
echo ""

echo "üîß Si sigue sin funcionar:"
echo "========================="
echo ""
echo "1. Verifica que Google est√© habilitado en Firebase"
echo "2. Verifica que los dominios est√©n autorizados"
echo "3. Verifica que las APIs est√©n habilitadas"
echo "4. Revisa la consola del navegador para errores"
echo ""

echo "üì± URLs importantes:"
echo "==================="
echo "- Frontend: http://localhost:3000"
echo "- Backend: http://localhost:3001"
echo "- Firebase Console: https://console.firebase.google.com"
echo "- Google Cloud Console: https://console.cloud.google.com"
echo ""

echo "üéØ Estado esperado:"
echo "=================="
echo "‚úÖ Login con Google funciona"
echo "‚úÖ Token se almacena correctamente"
echo "‚úÖ Calendario muestra eventos reales"
echo "‚úÖ Email muestra emails reales"
echo ""

echo "üöÄ ¬°Listo! Ahora configura Firebase y Google Cloud Console"
